(this["webpackJsonpikon-admin-web"]=this["webpackJsonpikon-admin-web"]||[]).push([[7],{650:function(e,t,n){"use strict";var c="http://127.0.0.1:8081",a="http://127.0.0.1:8082";t.a={getCategoryApi:{method:"get",url:"".concat(c,"/category")},addCategoryApi:{method:"post",url:"".concat(c,"/category")},deleteCategoryApi:{method:"delete",url:"".concat(c,"/category")},getNewsApi:{method:"get",url:"".concat(a,"/news")},addNewsApi:{method:"post",url:"".concat(a,"/news")},deleteNewsApi:{method:"delete",url:"".concat(a,"/news")}}},651:function(e,t,n){var c=n(667);e.exports={request:function(e,t,n,a){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};return console.log(n),e(!0),c({method:a,url:n,data:r}).then((function(t){return e(!1),t.data})).catch((function(n){e(!1);var c=n.response?n.response.status:0;t(400==c?{message:"\u0411\u04af\u0440\u044d\u043d \u0433\u04af\u0439\u0446\u044d\u0434 \u0431\u04e9\u0433\u043b\u04e9\u043d\u04e9 \u04af\u04af.",type:!1}:401==c?{message:"\u041d\u044d\u0432\u0442\u0440\u044d\u0445 \u0448\u0430\u0430\u0440\u0434\u043b\u0430\u0433\u0430\u0442\u0430\u0439.",type:!1}:403==c?{message:"\u041d\u0443\u0443\u0446 \u04af\u0433 \u0431\u0443\u0440\u0443\u0443 \u0431\u0430\u0439\u043d\u0430.",type:!1}:406==c?{message:"\u042d\u0440\u0445 \u0431\u0430\u0439\u0445\u0433\u04af\u0439 \u0431\u0430\u0439\u043d\u0430.",type:!1}:409==c?{message:"\u0423\u0442\u0430\u0441\u043d\u044b \u0434\u0443\u0433\u0430\u0430\u0440 \u044d\u0441\u0432\u044d\u043b \u043d\u044d\u0432\u0442\u0440\u044d\u0445 \u043d\u044d\u0440 \u0431\u04af\u0440\u0442\u0433\u044d\u043b\u0442\u044d\u0439 \u0431\u0430\u0439\u043d\u0430.",type:!1}:500==c?{message:"\u0421\u0435\u0440\u0432\u0435\u0440\u0438\u0439\u043d \u0430\u043b\u0434\u0430\u0430.",type:!1}:{message:"\u0418\u043d\u0442\u0435\u0440\u043d\u044d\u0442 \u0445\u043e\u043b\u0431\u043e\u043b\u0442\u043e\u043e \u0448\u0430\u043b\u0433\u0430\u043d\u0430 \u0443\u0443.",type:!1}),console.log("Error: "+n)}))}}},731:function(e,t,n){"use strict";n.r(t);var c=n(647),a=n.n(c),r=n(648),s=n(165),o=n(1),i=n.n(o),l=n(645),d=n(166),j=n(650),u=n(651),b=n(649),h=n(655),O=n.n(h),m=(n(660),n(19));O.a.locale("mn");var x=Object(o.forwardRef)((function(e){var t=e.item,n=e.num,c=e.getReq,s=Object(d.b)(),o=s.setGlobalLoading,i=s.setGlobalToast,h=function(){var e=Object(r.a)(a.a.mark((function e(){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.request)(o,i,j.a.deleteNewsApi.url+"/"+t.id,j.a.deleteNewsApi.method);case 2:c();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{className:"text-center",children:n}),Object(m.jsx)("td",{className:"text-center",children:Object(m.jsx)("img",{src:t.imageUrl,style:{width:50,height:50}})}),Object(m.jsx)("td",{className:"text-center",children:t.name}),Object(m.jsx)("td",{className:"text-center",children:O()(t.publishedDate).fromNow()}),Object(m.jsx)("td",{className:"text-center",children:Object(m.jsx)(l.b,{className:"px-3 py-2",color:"success",children:t.views})}),Object(m.jsx)("td",{className:"text-center",children:Object(m.jsx)(l.J,{alignHorizontal:"center",className:"xs-2",children:Object(m.jsx)(l.e,{className:"ml-1",active:!0,title:"\u0423\u0441\u0442\u0433\u0430\u0445",color:"danger","aria-pressed":"true",onClick:h,children:Object(m.jsx)(b.a,{name:"cil-trash"})})})})]},t.id)})),g=n(18);O.a.locale("mn");var p=function(e){var t=Object(o.useState)({name:"",content:"",isCovid:!1,isSponsored:!1,imageUrl:"",categoryId:0,adminId:0,adminName:""}),n=Object(s.a)(t,2),c=n[0],i=n[1],b=Object(o.useState)([]),h=Object(s.a)(b,2),O=h[0],x=h[1],p=Object(d.b)(),y=p.globalData,N=p.setGlobalLoading,k=p.setGlobalToast,A=function(){var t=Object(r.a)(a.a.mark((function t(){return a.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(u.request)(N,k,j.a.addNewsApi.url,j.a.addNewsApi.method,{name:c.name,content:c.content,isCovid:c.isCovid,isSponsored:c.isSponsored,imageUrl:c.imageUrl,categoryId:c.categoryId,adminId:y.id,adminName:y.name,adminUrl:y.url});case 2:t.sent,e.setModal(!1),e.refresh();case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var e=Object(r.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.request)(N,k,j.a.getCategoryApi.url,j.a.getCategoryApi.method);case 2:t=e.sent,x(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){I()}),[]),Object(m.jsxs)(l.E,{show:e.modal,onClose:function(){return e.setModal(!1)},size:"lg",centered:!0,children:[Object(m.jsx)(l.H,{closeButton:!0,children:Object(m.jsx)(l.I,{children:"\u041c\u044d\u0434\u044d\u044d \u043d\u044d\u043c\u044d\u0445"})}),Object(m.jsx)(l.F,{children:Object(m.jsx)(l.f,{children:Object(m.jsxs)(l.g,{children:[Object(m.jsx)(f,{label:"\u041c\u044d\u0434\u044d\u044d\u043d\u0438\u0439 \u043d\u044d\u0440",value:c.name,onChange:function(e){return i(Object(g.a)(Object(g.a)({},c),{},{name:e.target.value}))}}),Object(m.jsx)(v,{label:"\u0414\u044d\u043b\u0433\u044d\u0440\u044d\u043d\u0433\u04af\u0439",value:c.content,onChange:function(e){return i(Object(g.a)(Object(g.a)({},c),{},{content:e.target.value}))}}),Object(m.jsx)(f,{label:"Cover \u0437\u0443\u0440\u0430\u0433",value:c.imageUrl,onChange:function(e){return i(Object(g.a)(Object(g.a)({},c),{},{imageUrl:e.target.value}))}}),Object(m.jsx)(C,{label:"Covid-\u0442\u043e\u0439 \u0445\u043e\u043b\u0431\u043e\u043e\u0442\u043e\u0439 \u044e\u0443?",checkedValue:c.isCovid,onChange:function(e){return i(Object(g.a)(Object(g.a)({},c),{},{isCovid:!c.isCovid}))},idx:0}),Object(m.jsx)(C,{label:"\u041e\u043d\u0446\u0433\u043e\u0439 \u0437\u0430\u0440 \u0443\u0443?",checkedValue:c.isSponsored,onChange:function(e){i(Object(g.a)(Object(g.a)({},c),{},{isSponsored:!c.isSponsored}))},idx:1}),Object(m.jsx)(w,{label:"\u0410\u043d\u0433\u0438\u043b\u0430\u043b",checkedValue:c.categoryId,onChange:function(e){return i(Object(g.a)(Object(g.a)({},c),{},{categoryId:parseInt(e.target.value)}))},data:O})]})})}),Object(m.jsx)(l.G,{children:Object(m.jsx)(l.e,{color:"info",onClick:A,disabled:!c.name||!c.imageUrl||!c.content||0==c.categoryId,children:"\u041d\u044d\u043c\u044d\u0445"})})]})},f=function(e){var t=e.label,n=e.value,c=e.onChange,a=e.type,r=void 0===a?"text":a;return Object(m.jsxs)(l.s,{row:!0,children:[Object(m.jsx)(l.i,{md:"3",children:Object(m.jsx)(l.C,{children:t})}),Object(m.jsx)(l.i,{md:"9",children:Object(m.jsx)(l.w,{placeholder:t,value:n,onChange:c,type:r})})]})},v=function(e){var t=e.label,n=e.value,c=e.onChange;return Object(m.jsxs)(l.s,{children:[Object(m.jsx)(l.C,{children:t}),Object(m.jsx)(l.T,{placeholder:t,value:n,onChange:c,rows:16})]})},C=function(e){var t=e.label,n=void 0===t?"":t,c=(e.checkedValue,e.onChange);e.idx;return Object(m.jsxs)(l.s,{row:!0,children:[Object(m.jsx)(l.i,{md:"6",children:Object(m.jsx)(l.x,{onChange:function(e){return c(e.target.value)}})}),Object(m.jsx)(l.i,{md:"9",children:Object(m.jsx)(l.C,{children:n})})]})},w=function(e){var t=e.label,n=void 0===t?"":t,c=e.data,a=void 0===c?[]:c,r=e.onChange;return Object(m.jsxs)(l.s,{row:!0,children:[Object(m.jsx)(l.i,{md:"3",children:Object(m.jsx)(l.C,{children:n})}),Object(m.jsx)(l.i,{md:"9",children:Object(m.jsx)(l.K,{custom:!0,name:"select",id:"select",onChange:r,children:a.map((function(e,t){return Object(m.jsx)("option",{value:e.id,children:e.name},t)}))})})]})},y=["\u2116","","\u041d\u044d\u0440","\u041d\u0438\u0439\u0442\u044d\u043b\u0441\u044d\u043d \u043e\u0433\u043d\u043e\u043e","\u04ae\u0437\u0441\u044d\u043d","\u04ae\u0439\u043b\u0434\u044d\u043b"],N=function(e){var t=Object(o.useState)(!1),n=Object(s.a)(t,2),c=n[0],i=n[1],b=Object(o.useState)([]),h=Object(s.a)(b,2),O=h[0],g=h[1],f=Object(d.b)(),v=f.setGlobalLoading,C=f.setGlobalToast,w=function(){var e=Object(r.a)(a.a.mark((function e(){var t;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.request)(v,C,j.a.getNewsApi.url,j.a.getNewsApi.method);case 2:t=e.sent,console.log(t),g(t);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(o.useEffect)((function(){w()}),[]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(l.J,{alignVertical:"center",children:Object(m.jsx)(l.i,{xs:"1",children:Object(m.jsx)(l.e,{color:"success",onClick:function(){return i(!0)},children:"\u041d\u044d\u043c\u044d\u0445"})})}),Object(m.jsx)(l.J,{children:Object(m.jsx)(l.i,{children:Object(m.jsxs)("table",{className:"table table-hover table-outline mb-0 d-none d-sm-table",children:[Object(m.jsx)("thead",{className:"thead-light",children:Object(m.jsx)("tr",{children:y.map((function(e,t){return Object(m.jsx)("th",{className:"text-center",children:e},t)}))})}),Object(m.jsx)("tbody",{children:O&&O.map((function(e,t){return Object(m.jsx)(x,{item:e,num:t+1,getReq:w})}))})]})})}),Object(m.jsx)(p,{modal:c,setModal:i,refresh:w})]})};t.default=i.a.memo(N)}}]);
//# sourceMappingURL=7.2cb46f06.chunk.js.map